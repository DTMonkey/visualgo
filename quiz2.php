<?php
$mat_name=array(
"rose" => "ROSE MARIE TAN",
"duy" => "NGUYEN HOANG DUY",
"ivan" => "IVAN REINALDO",
"steven" => "STEVEN HALIM",
"A0105785Y" => "LI XINYAN",
"A0105709H" => "CHENG YINGJIE",
"A0088073Y" => "BRIAN AGUS WINATA",
"A0097788Y" => "BENJAMIN SEET TIAN YOU",
"A0102016E" => "XIE KAI",
"A0101286N" => "IPSITA MOHAPATRA",
"A0099448J" => "YOSUA AMADEUS SUSANTO",
"A0099155U" => "YUAN FANG",
"A0105551R" => "HUANG JUNJIE",
"A0094762W" => "ANG DUN YANG",
"A0097301L" => "LEONG WEI JIAN",
"A0097802Y" => "KOO QUAN EN CLEMENT",
"A0091706E" => "ZHANG ZIMENG",
"A0096911Y" => "OH QI XUAN",
"A0088366N" => "TRAN THANH QUANG",
"A0094593R" => "ENG TENG CHUAN",
"A0097935L" => "FAM WEI JIAN",
"A0100720E" => "ATUL NANDAKUMAR",
"A0097719L" => "MELVIN LEE ZHONG WEI",
"A0101491U" => "SUN SIYUE",
"A0097646M" => "GUOK ENYI ERNEST",
"A0099863H" => "IVAN TJAHJONO",
"A0087978Y" => "LOKMAN HAKIM BIN ABDUL MALIK",
"A0098802X" => "TAN TACK POH",
"A0099943J" => "HOANG QUANG MINH",
"A0099619J" => "YAP JUN LIANG JEREMY",
"A0097708N" => "LE BEIER",
"A0099903R" => "NG ZHI AN",
"A0097865H" => "CHAN XIAN CHEN EDWARD",
"A0100189M" => "CHNG XINNI",
"A0069637N" => "VEERAYA PUPATWIBUL",
"A0097797Y" => "CHEW CHIN HAO DARRY",
"A0105536L" => "JIANG HAO",
"A0099568A" => "CHRISTOPHER ANDY WEIDYA",
"A0098801Y" => "WANG RUI",
"A0096579E" => "WONG JUN WEI",
"A0094446X" => "TANG HUAN SONG",
"A0098068N" => "NGUYEN VAN THE",
"A0097964H" => "CHEW TEE MING",
"A0097801B" => "SIOW WEI QI",
"A0100985E" => "ZHANG YANQING",
"A0075035L" => "JIANG WENSI",
"A0100906U" => "LEE LI HUI",
"A0099712W" => "LOW JEN HUI JULIA",
"A0099655J" => "NGUYEN LE MINH DAT",
"A0101891L" => "GAO RISHENG",
"A0097082Y" => "LIM EN DIAN JOHN",
"A0099566H" => "RIZKI AHMAD FIRDAUS",
"A0088687A" => "RAMON BESPINYOWONG",
"A0096759E" => "KOH JUN YANG",
"A0091387W" => "CHEONG JIE HUI",
"A0105199B" => "ASHRAY JAIN",
"A0097947E" => "FOONG WEI LUN ANSELM NICHOLAS",
"A0097142E" => "IAN LEOW TZE WEI",
"A0097758E" => "FOONG TUCK MENG DARREN",
"A0080413U" => "CAO LI",
"A0098038W" => "CHENG WEN ZHAO",
"A0105682H" => "WANG ZI",
"A0099768Y" => "YOHANES LIM",
"A0086393U" => "NG JUNWEI",
"A0088319U" => "ONG JING JUN",
"A0097013L" => "HSU CHENG HSIEN",
"A0105749Y" => "LIU YANAN",
"A0098139R" => "HISYAM NURSAID INDRAKESUMA",
"U099009J" => "TEO KAI REN",
"A0097972J" => "TAY JUN WU ALAN",
"A0087013M" => "CHEONG EE JU MARTIN",
"A0098084U" => "TRINH NGOC KHANH",
"A0101331H" => "MUN HUI YI",
"A0092051R" => "LIM HONG WEI KELVIN",
"A0087964J" => "TAN YOU HOCK",
"A0105546J" => "BAO XIAO",
"A0090551L" => "NGUYEN HOANG THANH DUC",
"A0088455R" => "IGNATIUS DAMAI",
"A0085482X" => "TANG GAO LIANG",
"A0091842A" => "WU XUDONG",
"A0097846J" => "KEITH LIM YONG MING",
"A0086030R" => "LIU WEIYUAN",
"A0092076A" => "SUDARSAN GOPALASWAMI PADMANABHAN",
"A0100976E" => "ANG SING YEE",
"A0088601E" => "AGARWAL ADITI",
"A0091746X" => "WU DAN",
"A0081136M" => "TAN WEI JIAN JOASH",
"A0074635B" => "MURALI SRIRANGAM RAMANUJAM",
"A0100848J" => "SHERLYN GOH SHI HUI",
"A0082927W" => "TEO CHEE WEE",
"A0094558N" => "NG WEE THIA JOEL",
"A0097876A" => "TAN WEI LIANG JEREMY",
"A0099584H" => "TAMANA ANNA THARAKAN",
"A0097889W" => "TEO JUNHAO",
"A0097706U" => "ONG TECK SHENG",
"A0073693W" => "PALLANIKUMARAN S/O SELVAN",
"A0118579N" => "EKBLAD CAMERON",
"A0105522W" => "XU CHEN",
"A0105767Y" => "XIA LU",
"A0092165E" => "LI DANQI",
"A0078680U" => "PENG SHUJIN",
"A0105729A" => "AN JIANGZE",
"A0081205U" => "LAW WEN YONG",
"A0102658H" => "HUTAMA ADHI HANJAYA",
"A0097710A" => "CHONG ROY",
"A0098155W" => "LUI YU YAO",
"A0096614Y" => "LEE HOU YI",
"A0078031M" => "HUO JINGYA",
"A0074273E" => "NEHA MITTAL",
"A0080412W" => "JOANNE MAH JIA WEN",
"A0101871N" => "LIM WEI CHENG",
"A0088328U" => "PHYO MYAT THU",
"A0073731J" => "CHUA CHIA WEI",
"A0097978X" => "KENSON TAN KIAN SENG",
"A0099727J" => "LEWIS HARIS NATA",
"A0100234E" => "WILLIAM KIMSHA",
"A0073998E" => "CHEUNG YEW KONG BENJAMIN",
"A0118185A" => "ARENT WARREN DE JONG",
"A0098077N" => "BUI TRONG NHAN",
"A0105750N" => "GU JUNCHAO",
"A0088015H" => "WONG SHUN HEUR JOHN",
"A0097836L" => "CHEU WEE LOON",
"A0105195J" => "BHARATH PARAMESWARAN",
"A0096586J" => "LIM WANCAI DARYL",
"A0096790N" => "LIM CHENG CHONG",
"A0105570N" => "LIU SIWEI",
"A0071636E" => "TAN QIAO YI MICHELLE",
"A0103535R" => "LI MINGYANG",
"A0096677H" => "KUEK KIANG KUANG",
"A0097081B" => "ABEL TAN JUN QIANG",
"A0101252A" => "YEAP SI RUI",
"A0101324A" => "CHUA HAO ENG",
"A0100756M" => "GOH HUI MAY",
"A0097722X" => "GOH JIAQUAN",
"A0101232H" => "ONG YUN TING JOCELYN",
"A0097543W" => "TAN JUN WEN JEREMY",
"A0090971Y" => "XIAO JINYU",
"A0083402R" => "LIM WEI KE",
"A0098710B" => "A YUSUF SHAMIR",
"A0097091Y" => "WONG KANG-AN",
"A0099324X" => "TRUONG VIET TRUNG",
"A0100927M" => "KO WAN LING",
"A0094682U" => "TERENCE REI JIE THEN",
"A0099151B" => "DU ZHIYUAN",
"A0097853M" => "TAN JUN KAI",
"A0099778X" => "WENG YUAN",
"A0100704B" => "OOH JING",
"A0097929E" => "CHOO YI MING",
"A0101810A" => "TAN ZHENG JIE",
"A0105699R" => "ZHANG MENGDI",
"A0004699W" => "YONG JIA JIE",
"A0097862M" => "OW KOK YANG DARYL",
"A0099858Y" => "DOAN XUAN LOC NGUYEN",
"U095916B" => "NG YANG YI DESMOND",
"A0098924M" => "ZENG QINGTAO",
"A0097780N" => "SOH YIDA",
"A0101200R" => "HUANG WEI LING",
"A0101651X" => "SHERLYN GOH SZE HUI",
"A0098021L" => "LIM PEK KHING ANDRE",
"A0087580W" => "CHOO MIN ER",
"A0097759A" => "MUHAMMAD FAZLI BIN ROSLI",
"A0098862L" => "ANG HUI LOON",
"A0097278L" => "CAO YUBO",
"A0101735R" => "QIU YUNHAN",
"A0097304E" => "CHIN ZE-YE LEON",
"A0077256X" => "LIM GANG YI",
"A0096863M" => "TAN LI BOON",
"A0094534B" => "OMAR KHALID B YAHYA",
"A0099165R" => "TAN HWA FOO",
"A0105544M" => "WAN ZHOUTONG",
"A0098816M" => "QUEK JUN JIE",
"A0085159W" => "CAI DI",
"A0087509U" => "HONG SHENGJUN",
"A0117472H" => "LI CHI",
"A0118437A" => "THOMAS ALLAN BEDNAR");

$mat_pwd=array(
"rose" => "testing1",
"duy" => "testing2",
"ivan" => "testing3",
"steven" => "testing4",

"A0105785Y" => "zzYMAWVMx6",
"A0105709H" => "zzvMVQC6kr",
"A0088073Y" => "zzqatYFVq7",
"A0097788Y" => "zzC9U7qfah",
"A0102016E" => "zzXFD6STJT",
"A0101286N" => "zz4Wrk8J7r",
"A0099448J" => "zzvBqB6ESf",
"A0099155U" => "zzrXHZSmhm",
"A0105551R" => "zz5L9fFGhz",
"A0094762W" => "zzDnGabNab",
"A0097301L" => "zzjsp62PMY",
"A0097802Y" => "zzJsFLCUGB",
"A0091706E" => "zzKUCnPa5k",
"A0096911Y" => "zzSGntxpkx",
"A0088366N" => "zzcfjctnpf",
"A0094593R" => "zzuadqgy7G",
"A0097935L" => "zzDqWrPN5j",
"A0100720E" => "zzEDAnTaPe",
"A0097719L" => "zzLN2pgDDN",
"A0101491U" => "zz6ZngtBNx",
"A0097646M" => "zz2qenKM6u",
"A0099863H" => "zzPFfueYQC",
"A0087978Y" => "zzLwzZfm3d",
"A0098802X" => "zzM2G4u2gx",

"A0099943J" => "lo6mAw6dQJ",
"A0099619J" => "loxWmFNnZD",
"A0097708N" => "loujdpkqKz",
"A0099903R" => "lo4HvLyU3L",
"A0097865H" => "lo7Bmr952F",
"A0100189M" => "lo2EMLzNvH",
"A0069637N" => "loRa4swqQ2",
"A0097797Y" => "loju4vWz4q",
"A0105536L" => "lo4aESpk7N",
"A0099568A" => "loB8hDFqxM",
"A0098801Y" => "loZst2zhzc",
"A0096579E" => "lo6a8rNZUy",
"A0094446X" => "lo2ZFtep3p",
"A0098068N" => "loLc9BSe9B",
"A0097964H" => "lomvcteCbn",
"A0097801B" => "loUZNyy3kh",
"A0100985E" => "loxrRJ2xCg",
"A0075035L" => "loV7DdfqAS",
"A0100906U" => "loc9nHY6VH",
"A0099712W" => "lofYLvvfdf",
"A0099655J" => "lojkJwxTZK",
"A0101891L" => "loyTdpg8br",
"A0097082Y" => "lozyFXBCE5",
"A0099566H" => "loBuM38JPh",

"A0088687A" => "shK3KGdTkk",
"A0096759E" => "shBWhss7ag",
"A0091387W" => "shVvbJf4G3",
"A0105199B" => "shR7wARR2B",
"A0097947E" => "shau4BHABx",
"A0097142E" => "sh3gfeTCB3",
"A0097758E" => "shqMatNSXa",
"A0080413U" => "shAPaMAcQk",
"A0098038W" => "sh6K8DcBWx",
"A0105682H" => "shQQgfRSjw",
"A0099768Y" => "sh2e8UzSu7",
"A0086393U" => "sheLXewa5A",
"A0088319U" => "sh58kYaA3X",
"A0097013L" => "shqX9H3FDy",
"A0105749Y" => "shXYvqNvBS",
"A0098139R" => "shz6BKbPeG",
"U099009J" => "shjqnrzbAC",
"A0097972J" => "shsmCKkhJn",
"A0087013M" => "shThtWEsX7",
"A0098084U" => "shGL2XQ2dy",
"A0101331H" => "shPD9TRzQU",
"A0092051R" => "shcu6VmB7U",
"A0087964J" => "shHSueka7L",

"A0105546J" => "ak968zYruu",
"A0090551L" => "akk4pfV3Ku",
"A0088455R" => "akAZZcTfFN",
"A0085482X" => "ak7hDy7FPW",
"A0091842A" => "akN69cSM8R",
"A0097846J" => "akpW65XbCR",
"A0086030R" => "akKgVZbjes",
"A0092076A" => "akxL5ppCJF",
"A0100976E" => "akHGEpu9N5",
"A0088601E" => "akzhCMMEmW",
"A0091746X" => "akLsxYAjF2",
"A0081136M" => "akgsRh9wFb",
"A0074635B" => "akSJe9xWvn",
"A0100848J" => "akeakAqc7n",
"A0082927W" => "ak5ZLRDZNw",
"A0094558N" => "akeC8L5PJY",
"A0097876A" => "ak6seK3WNj",
"A0099584H" => "aknKTvkprL",
"A0097889W" => "akuckCJsyh",
"A0097706U" => "ak6mwtfX3W",
"A0073693W" => "aknAE9Ychr",
"A0118579N" => "akqZcTd3te",

"A0105522W" => "rehKqxFjKd",
"A0105767Y" => "rev5cJTuw5",
"A0092165E" => "rezf2J32BC",
"A0078680U" => "rey53XA8Db",
"A0105729A" => "reTCjxWt3d",
"A0081205U" => "redekabQeG",
"A0102658H" => "rewjx4CNY9",
"A0097710A" => "reL7tW8epw",
"A0098155W" => "reQWBpYv2r",
"A0096614Y" => "ree6ZSzbCj",
"A0078031M" => "reggHhnkC3",
"A0074273E" => "renxF3DPw9",
"A0080412W" => "reQ4xPG3MN",
"A0101871N" => "repzbzdWtM",
"A0088328U" => "reghgVYnKe",
"A0073731J" => "reWmBc9A2E",
"A0097978X" => "rekdsGXGzu",
"A0099727J" => "revnyBJyyj",
"A0100234E" => "repbK3TuvX",
"A0073998E" => "reTVQLmGGb",
"A0118185A" => "re5QwKSRav",

"A0098077N" => "zxLRk2yWMD",
"A0105750N" => "zxVa7AayeY",
"A0088015H" => "zxT4xQAxh9",
"A0097836L" => "zxVdhDmSEV",
"A0105195J" => "zxpQa2rNK3",
"A0096586J" => "zxwv3EhaQr",
"A0096790N" => "zxjBDkGaxg",
"A0105570N" => "zx9HXztDCF",
"A0071636E" => "zxXmmt679t",
"A0103535R" => "zxQ2FTW8yc",
"A0096677H" => "zx9UbCuevm",
"A0097081B" => "zxTyMpkwBg",
"A0101252A" => "zxFWvZBx8B",
"A0101324A" => "zxu6PYXtVZ",
"A0100756M" => "zxPsC7R79M",
"A0097722X" => "zx4qH8RwLH",
"A0101232H" => "zx8DgAK2Vg",
"A0097543W" => "zxyuPxHu8n",
"A0090971Y" => "zxaLy2KbgK",
"A0083402R" => "zxjU9J5mE2",

"A0098710B" => "uiaUxwC3jh",
"A0097091Y" => "uiSptN6GCL",
"A0099324X" => "uiQDzwJ3aM",
"A0100927M" => "uiQFASqwqK",
"A0094682U" => "uiRdrPWtWx",
"A0099151B" => "uifMd2DUqe",
"A0097853M" => "ui7yv7QJtA",
"A0099778X" => "uiGyf3FnA8",
"A0100704B" => "ui3CdXKZJ3",
"A0097929E" => "uiMD6qbYe9",
"A0101810A" => "uiEq5zCYjj",
"A0105699R" => "uihBJhCkBG",
"A0004699W" => "uiY5CR7v8T",
"A0097862M" => "uiCEau3Hac",
"A0099858Y" => "uieCgPfAak",
"U095916B" => "uiUam4tDnS",
"A0098924M" => "ui2PAybSst",
"A0097780N" => "uiWWscm8uX",
"A0101200R" => "uiwL3Y3sHR",
"A0101651X" => "uizw3kxufC",
"A0098021L" => "uiS4SwKw2X",
"A0087580W" => "uiSwJQ7Yhj",

"A0097759A" => "iivqQ5Jw8Z",
"A0098862L" => "iixAL9PLCn",
"A0097278L" => "iiaWatysPJ",
"A0101735R" => "iiDrHB2bUq",
"A0097304E" => "iiFy5DmHeN",
"A0077256X" => "iiuQhfQBnw",
"A0096863M" => "iiYxgqYXvs",
"A0094534B" => "iigwCbYmfh",
"A0099165R" => "ii8wMtRC44",
"A0105544M" => "ii7zgRhQZr",
"A0098816M" => "iiEhzSex9q",
"A0085159W" => "iiwNaFgKjh",
"A0087509U" => "iikrJ4wKES",
"A0117472H" => "iiESTRkfBn",
"A0118437A" => "iiUM6Y5cjP");

$uid = $_GET["uid"];
$pwd = $_GET["pwd"];
$mode = $_GET["mode"];
$id = $_GET["id"];

if ($mode == 0) { // check if uid and pwd match
  if ($mat_pwd[$uid] == $pwd)
    echo 1;
  else
    echo 0;
  return;
}

if ($mode != 4 && $mat_pwd[$uid] != $pwd) { // prevent execution if it is invalid
  echo -1;
  return;
}

$con = mysqli_connect("","onlinequiz","roseivanfyp","quiz");
if (mysqli_connect_errno($con))
  echo "Failed to connect to MySQL: " . mysqli_connect_error();

if ($mode == 1) { // return the question text only if uid and pwd matches
  if ($id == 1)
    echo 'Given the BST as shown in the picture, click the <strong>sequence of vertices (the order matters)</strong> that are visited by <strong>Search(77)</strong>!';
  else if ($id == 2)
    echo 'Given the AVL tree as shown in the picture, click <strong>two vertices (in any order)</strong> that can be deleted from this AVL tree <strong>without</strong> causing any rotation to occur!<br/><br/>Note: If a vertex with two children is deleted, we will replace it with its successor.';
  else if ($id == 3)
    echo 'An integer 77 is going to be inserted into the binary max heap as shown in the picture, click the <strong>sequence of vertices (the order matters)</strong> that will swap their content with vertex 77 during this insertion!';
  else if ($id == 4)
    echo 'We perform <strong>twenty (20)</strong> ExtractMax operations to the binary max heap as shown in the picture, click <strong>all vertices (in any order)</strong> that will remain in the binary max heap after all these operations are executed!';
  else if ($id == 5)
    echo 'Given the Union-Find Disjoint Sets as shown in the picture, click the <strong>sequence of vertices (the order matters)</strong> explored by <strong>findSet(4)</strong> to find the representative vertex of the set that contains vertex 4.';
  else if ($id == 6)
    echo 'Given the Union-Find Disjoint Sets as shown in the picture, click <strong>all vertices (in any order)</strong> where calling <strong>findSet(v)</strong> for all vertex <strong>v &isin; your_answer</strong> do not change the UFDS structure. Note that the path compression heuristic is used inside <strong>findSet</strong> operation.';
  else if ($id == 7)
    echo 'Given the graph as shown in the picture, click <strong>all vertices (in any order)</strong> that has out-degree &ge; 4.';
  else if ($id == 8)
    echo 'Given the graph as shown in the picture, click <strong>all vertices (in any order)</strong> that will cause the graph to be disconnected if deleted!';
  else if ($id == 9)
    echo 'Given the graph as shown in the picture, click the <strong>first five vertices (the order matters)</strong> visited by DFS(2), i.e. DFS started from source vertex 2. Vertex 2 is the obviously the first visited vertex. The neighbors of a vertex are listed in ascending vertex numbers!';
  else if ($id == 10)
    echo 'Given the graph as shown in the picture, click the <strong>first five vertices (the order matters)</strong> visited by BFS(8), i.e. BFS started from source vertex 8. Vertex 8 is obviously the first visited vertex. The neighbors of a vertex are listed in ascending vertex numbers!';
  else if ($id == 11)
    echo 'Given the undirected weighted graph as shown in the picture, click the <strong>first five vertices (the order matters)</strong> that are added to MST by Prim\'s algorithm if the source vertex is vertex 6! Vertex 6 itself is clearly the first vertex added to MST.';
  else if ($id == 12)
    echo 'Given the undirected weighted graph as shown in the picture, click the <strong>first five vertices (the order matters)</strong> that are added to the MST by Prim\'s algorithm if the source vertex is vertex 9! Vertex 9 itself is clearly the first vertex added to the MST.';
  else if ($id == 13)
    echo 'Given the undirected weighted graph as shown in the picture, click the <strong>first five edges (the order matters)</strong> that are added to the MST by Kruskal\'s algorithm!';
  else if ($id == 14)
    echo 'Given the undirected weighted graph as shown in the picture, click <strong>the last edge</strong> that is added to MST by Kruskal\'s algorithm!';
  else if ($id == 15)
    echo 'Given the undirected weighted graph as shown in the picture, click <strong>the edge</strong> that has the maximum edge weight along the minimax path from vertex 0 to vertex 9.<br/><br/>The minimax path between two vertices is defined as the path that minimizes the maximum edge weight along the two vertices.';
  else if ($id == 16)
    echo 'Given the directed weighted graph as shown in the picture, click the vertex with the <strong>largest</strong> shortest path distance from source vertex 1!';
  else if ($id == 17)
    echo 'Given the directed weighted graph as shown in the picture, click <strong>all vertices (in any order)</strong> that are reachable from a negative weight cycle when the source vertex is vertex 0! That is, these vertices will have ill-defined shortest path values of negative infinity.';
  else if ($id == 18)
    echo 'Given the directed weighted graph as shown in the picture, run any SSSP algorithm that you have learned to identify the vertices in this graph that have shortest path values &le; 7 from source vertex 0.<br/><br/>Click <strong>all applicable vertices (in any order)</strong>!';
  else if ($id == 19)
    echo 'Given the directed weighted graph as shown in the picture, run any SSSP algorithm that you have learned to identify the vertices in this graph that have shortest path values &ge; 12 from source vertex 0.<br/><br/>Click <strong>all applicable vertices (in any order)</strong>!';
  else if ($id == 20)
    echo 'Given the directed weighted graph as shown in the picture, run any SSSP algorithm that you have learned to identify the vertices in this graph that have shortest path values &ge; 20 from source vertex 0. This time, we impose additional constraint that the shortest paths from source vertex 0 <strong>cannot use more than five edges</strong>.<br/><br/>Click <strong>all applicable vertices (in any order)</strong>!';
  else
    echo 'You need to supply an id<br>';
}
else if ($mode == 2) { // return the JSON object
  if ($id == 1)
    echo '{"vl":{"0":{"cx":450,"cy":50,"text":"15","state":"default"},"8":{"cx":225,"cy":100,"text":"3","state":"default"},"9":{"cx":337.5,"cy":150,"text":"7","state":"default"},"10":{"cx":675,"cy":100,"text":"80","state":"default"},"11":{"cx":562.5,"cy":150,"text":"76","state":"default"},"12":{"cx":618.75,"cy":200,"text":"77","state":"default"},"13":{"cx":112.5,"cy":150,"text":"1","state":"default"},"14":{"cx":787.5,"cy":150,"text":"99","state":"default"}},"el":{"8":{"vertexA":0,"vertexB":8,"type":0,"weight":1,"state":"default","animateHighlighted":false},"9":{"vertexA":8,"vertexB":9,"type":0,"weight":1,"state":"default","animateHighlighted":false},"10":{"vertexA":0,"vertexB":10,"type":0,"weight":1,"state":"default","animateHighlighted":false},"11":{"vertexA":10,"vertexB":11,"type":0,"weight":1,"state":"default","animateHighlighted":false},"12":{"vertexA":11,"vertexB":12,"type":0,"weight":1,"state":"default","animateHighlighted":false},"13":{"vertexA":8,"vertexB":13,"type":0,"weight":1,"state":"default","animateHighlighted":false},"14":{"vertexA":10,"vertexB":14,"type":0,"weight":1,"state":"default","animateHighlighted":false}},"status":""}';
  else if ($id == 2)
    echo '{"vl":{"8":{"cx":450,"cy":50,"text":"6","state":"default"},"9":{"cx":225,"cy":100,"text":"4","state":"default"},"10":{"cx":675,"cy":100,"text":"8","state":"default"},"11":{"cx":112.5,"cy":150,"text":"2","state":"default"},"12":{"cx":337.5,"cy":150,"text":"5","state":"default"},"13":{"cx":562.5,"cy":150,"text":"7","state":"default"},"15":{"cx":56.25,"cy":200,"text":"1","state":"default"}},"el":{"9":{"vertexA":8,"vertexB":9,"type":0,"weight":1,"state":"default","animateHighlighted":false},"10":{"vertexA":8,"vertexB":10,"type":0,"weight":1,"state":"default","animateHighlighted":false},"11":{"vertexA":9,"vertexB":11,"type":0,"weight":1,"state":"default","animateHighlighted":false},"12":{"vertexA":9,"vertexB":12,"type":0,"weight":1,"state":"default","animateHighlighted":false},"13":{"vertexA":10,"vertexB":13,"type":0,"weight":1,"state":"default","animateHighlighted":false},"15":{"vertexA":11,"vertexB":15,"type":0,"weight":1,"state":"default","animateHighlighted":false}},"status":"","lineNo":7}';
  else if ($id == 3 || $id == 4)
    echo '{"vl":{"1":{"cx":478.125,"cy":210,"text":1,"state":"default"},"2":{"cx":421.875,"cy":210,"text":2,"state":"default"},"3":{"cx":534.375,"cy":210,"text":3,"state":"default"},"4":{"cx":140.625,"cy":210,"text":4,"state":"default"},"5":{"cx":365.625,"cy":210,"text":5,"state":"default"},"6":{"cx":618.75,"cy":170,"text":6,"state":"default"},"7":{"cx":843.75,"cy":170,"text":7,"state":"default"},"8":{"cx":84.375,"cy":210,"text":8,"state":"default"},"9":{"cx":196.875,"cy":210,"text":9,"state":"default"},"10":{"cx":309.375,"cy":210,"text":10,"state":"default"},"11":{"cx":393.75,"cy":170,"text":11,"state":"default"},"12":{"cx":506.25,"cy":170,"text":12,"state":"default"},"13":{"cx":562.5,"cy":130,"text":13,"state":"default"},"14":{"cx":731.25,"cy":170,"text":14,"state":"default"},"15":{"cx":787.5,"cy":130,"text":15,"state":"default"},"16":{"cx":28.125,"cy":210,"text":16,"state":"default"},"17":{"cx":56.25,"cy":170,"text":17,"state":"default"},"18":{"cx":168.75,"cy":170,"text":18,"state":"default"},"19":{"cx":112.5,"cy":130,"text":19,"state":"default"},"20":{"cx":253.125,"cy":210,"text":20,"state":"default"},"21":{"cx":281.25,"cy":170,"text":21,"state":"default"},"22":{"cx":337.5,"cy":130,"text":22,"state":"default"},"23":{"cx":225,"cy":90,"text":23,"state":"default"},"24":{"cx":675,"cy":90,"text":24,"state":"default"},"25":{"cx":450,"cy":50,"text":25,"state":"default"}},"el":{"2":{"vertexA":25,"vertexB":23,"type":0,"weight":1,"state":"default","animateHighlighted":false},"3":{"vertexA":25,"vertexB":24,"type":0,"weight":1,"state":"default","animateHighlighted":false},"4":{"vertexA":23,"vertexB":19,"type":0,"weight":1,"state":"default","animateHighlighted":false},"5":{"vertexA":23,"vertexB":22,"type":0,"weight":1,"state":"default","animateHighlighted":false},"6":{"vertexA":24,"vertexB":13,"type":0,"weight":1,"state":"default","animateHighlighted":false},"7":{"vertexA":24,"vertexB":15,"type":0,"weight":1,"state":"default","animateHighlighted":false},"8":{"vertexA":19,"vertexB":17,"type":0,"weight":1,"state":"default","animateHighlighted":false},"9":{"vertexA":19,"vertexB":18,"type":0,"weight":1,"state":"default","animateHighlighted":false},"10":{"vertexA":22,"vertexB":21,"type":0,"weight":1,"state":"default","animateHighlighted":false},"11":{"vertexA":22,"vertexB":11,"type":0,"weight":1,"state":"default","animateHighlighted":false},"12":{"vertexA":13,"vertexB":12,"type":0,"weight":1,"state":"default","animateHighlighted":false},"13":{"vertexA":13,"vertexB":6,"type":0,"weight":1,"state":"default","animateHighlighted":false},"14":{"vertexA":15,"vertexB":14,"type":0,"weight":1,"state":"default","animateHighlighted":false},"15":{"vertexA":15,"vertexB":7,"type":0,"weight":1,"state":"default","animateHighlighted":false},"16":{"vertexA":17,"vertexB":16,"type":0,"weight":1,"state":"default","animateHighlighted":false},"17":{"vertexA":17,"vertexB":8,"type":0,"weight":1,"state":"default","animateHighlighted":false},"18":{"vertexA":18,"vertexB":4,"type":0,"weight":1,"state":"default","animateHighlighted":false},"19":{"vertexA":18,"vertexB":9,"type":0,"weight":1,"state":"default","animateHighlighted":false},"20":{"vertexA":21,"vertexB":20,"type":0,"weight":1,"state":"default","animateHighlighted":false},"21":{"vertexA":21,"vertexB":10,"type":0,"weight":1,"state":"default","animateHighlighted":false},"22":{"vertexA":11,"vertexB":5,"type":0,"weight":1,"state":"default","animateHighlighted":false},"23":{"vertexA":11,"vertexB":2,"type":0,"weight":1,"state":"default","animateHighlighted":false},"24":{"vertexA":12,"vertexB":1,"type":0,"weight":1,"state":"default","animateHighlighted":false},"25":{"vertexA":12,"vertexB":3,"type":0,"weight":1,"state":"default","animateHighlighted":false}},"status":"ExtractMax() has been completed","lineNo":0}';
  else if ($id == 5 || $id == 6)
    echo '{"vl":{"0":{"cx":75,"cy":200,"text":0,"state":"default"},"1":{"cx":75,"cy":140,"text":1,"state":"default"},"2":{"cx":225,"cy":140,"text":2,"state":"default"},"3":{"cx":150,"cy":80,"text":3,"state":"default"},"4":{"cx":450,"cy":140,"text":4,"state":"default"},"5":{"cx":450,"cy":80,"text":5,"state":"default"},"6":{"cx":750,"cy":80,"text":6,"state":"default"},"7":{"cx":450,"cy":20,"text":7,"state":"default"}},"el":{"0":{"vertexA":1,"vertexB":0,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"1":{"vertexA":3,"vertexB":1,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"2":{"vertexA":3,"vertexB":2,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"3":{"vertexA":7,"vertexB":3,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"4":{"vertexA":5,"vertexB":4,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"5":{"vertexA":7,"vertexB":5,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"6":{"vertexA":7,"vertexB":6,"type":0,"weight":1,"animateHighlighted":false,"state":"default"},"7":{"vertexA":7,"vertexB":7,"type":0,"weight":1,"animateHighlighted":false,"state":-1}},"status":"","lineNo":2}';
  else if ($id >= 7 && $id <= 10)
    echo '{"vl":{"0":{"cx":200,"cy":50,"text":"0","state":"default"},"1":{"cx":200,"cy":170,"text":"1","state":"default"},"2":{"cx":350,"cy":110,"text":"2","state":"default"},"3":{"cx":500,"cy":170,"text":"3","state":"default"},"4":{"cx":275,"cy":290,"text":"4","state":"default"},"5":{"cx":500,"cy":290,"text":"5","state":"default"},"6":{"cx":600,"cy":50,"text":"6","state":"default"},"7":{"cx":640,"cy":240,"text":"7","state":"default"},"8":{"cx":700,"cy":120,"text":"8","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":0,"weight":8,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":0,"vertexB":2,"type":0,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":1,"vertexB":2,"type":0,"weight":13,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":1,"vertexB":3,"type":0,"weight":25,"state":"default","displayWeight":true,"animateHighlighted":false},"4":{"vertexA":1,"vertexB":4,"type":0,"weight":9,"state":"default","displayWeight":true,"animateHighlighted":false},"5":{"vertexA":2,"vertexB":3,"type":0,"weight":14,"state":"default","displayWeight":true,"animateHighlighted":false},"6":{"vertexA":2,"vertexB":6,"type":0,"weight":21,"state":"default","displayWeight":true,"animateHighlighted":false},"7":{"vertexA":3,"vertexB":4,"type":0,"weight":20,"state":"default","displayWeight":true,"animateHighlighted":false},"8":{"vertexA":3,"vertexB":5,"type":0,"weight":8,"state":"default","displayWeight":true,"animateHighlighted":false},"9":{"vertexA":3,"vertexB":6,"type":0,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false},"10":{"vertexA":3,"vertexB":7,"type":0,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false},"11":{"vertexA":3,"vertexB":8,"type":0,"weight":16,"state":"default","displayWeight":true,"animateHighlighted":false},"12":{"vertexA":4,"vertexB":5,"type":0,"weight":19,"state":"default","displayWeight":true,"animateHighlighted":false},"13":{"vertexA":5,"vertexB":7,"type":0,"weight":11,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"","lineNo":5}';
  else if ($id >= 11 && $id <= 15)
    echo '{"vl":{"0":{"cx":50,"cy":100,"text":"0","state":"default"},"1":{"cx":250,"cy":100,"text":"1","state":"default"},"2":{"cx":450,"cy":100,"text":"2","state":"default"},"3":{"cx":650,"cy":100,"text":"3","state":"default"},"4":{"cx":850,"cy":100,"text":"4","state":"default"},"5":{"cx":50,"cy":250,"text":"5","state":"default"},"6":{"cx":250,"cy":250,"text":"6","state":"default"},"7":{"cx":450,"cy":250,"text":"7","state":"default"},"8":{"cx":650,"cy":250,"text":"8","state":"default"},"9":{"cx":850,"cy":250,"text":"9","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":0,"weight":10,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":1,"vertexB":2,"type":0,"weight":7,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":1,"vertexB":6,"type":0,"weight":8,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":1,"vertexB":7,"type":0,"weight":16,"state":"default","displayWeight":true,"animateHighlighted":false},"4":{"vertexA":2,"vertexB":3,"type":0,"weight":14,"state":"default","displayWeight":true,"animateHighlighted":false},"5":{"vertexA":2,"vertexB":7,"type":0,"weight":38,"state":"default","displayWeight":true,"animateHighlighted":false},"6":{"vertexA":2,"vertexB":8,"type":0,"weight":13,"state":"default","displayWeight":true,"animateHighlighted":false},"7":{"vertexA":3,"vertexB":4,"type":0,"weight":21,"state":"default","displayWeight":true,"animateHighlighted":false},"8":{"vertexA":3,"vertexB":8,"type":0,"weight":18,"state":"default","displayWeight":true,"animateHighlighted":false},"9":{"vertexA":5,"vertexB":6,"type":0,"weight":30,"state":"default","displayWeight":true,"animateHighlighted":false},"10":{"vertexA":6,"vertexB":7,"type":0,"weight":9,"state":"default","displayWeight":true,"animateHighlighted":false},"11":{"vertexA":7,"vertexB":8,"type":0,"weight":20,"state":"default","displayWeight":true,"animateHighlighted":false},"12":{"vertexA":8,"vertexB":9,"type":0,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"","lineNo":[1,2]}';
  else if ($id == 16)
    echo '{"vl":{"0":{"cx":100,"cy":100,"text":"0","state":"default"},"1":{"cx":300,"cy":100,"text":"1","state":"default"},"2":{"cx":200,"cy":200,"text":"2","state":"default"},"3":{"cx":500,"cy":100,"text":"3","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":1,"weight":1,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":1,"vertexB":2,"type":1,"weight":2,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":2,"vertexB":0,"type":1,"weight":3,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":1,"vertexB":3,"type":1,"weight":4,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"x","lineNo":[1,2]}';
  else if ($id == 17)
    echo '{"vl":{"0":{"cx":100,"cy":100,"text":"0","state":"default"},"1":{"cx":300,"cy":100,"text":"1","state":"default"},"2":{"cx":200,"cy":200,"text":"2","state":"default"},"3":{"cx":500,"cy":100,"text":"3","state":"default"},"4":{"cx":100,"cy":200,"text":"4","state":"default"},"5":{"cx":300,"cy":50,"text":"5","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":1,"weight":19,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":1,"vertexB":2,"type":1,"weight":-27,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":2,"vertexB":0,"type":1,"weight":7,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":1,"vertexB":3,"type":1,"weight":77,"state":"default","displayWeight":true,"animateHighlighted":false},"4":{"vertexA":0,"vertexB":5,"type":1,"weight":-77,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"x","lineNo":[1,2]}';
  else if ($id == 18)
    echo '{"vl":{"0":{"cx":50,"cy":100,"text":"0","state":"default"},"1":{"cx":250,"cy":100,"text":"1","state":"default"},"2":{"cx":250,"cy":300,"text":"2","state":"default"},"3":{"cx":450,"cy":100,"text":"3","state":"default"},"4":{"cx":450,"cy":300,"text":"4","state":"default"},"5":{"cx":650,"cy":100,"text":"5","state":"default"},"6":{"cx":650,"cy":300,"text":"6","state":"default"},"7":{"cx":850,"cy":100,"text":"7","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":1,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":0,"vertexB":2,"type":1,"weight":22,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":2,"vertexB":1,"type":1,"weight":3,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":2,"vertexB":4,"type":1,"weight":-6,"state":"default","displayWeight":true,"animateHighlighted":false},"4":{"vertexA":1,"vertexB":3,"type":1,"weight":7,"state":"default","displayWeight":true,"animateHighlighted":false},"5":{"vertexA":1,"vertexB":4,"type":1,"weight":11,"state":"default","displayWeight":true,"animateHighlighted":false},"6":{"vertexA":4,"vertexB":3,"type":1,"weight":2,"state":"default","displayWeight":true,"animateHighlighted":false},"7":{"vertexA":4,"vertexB":6,"type":1,"weight":20,"state":"default","displayWeight":true,"animateHighlighted":false},"8":{"vertexA":3,"vertexB":5,"type":1,"weight":17,"state":"default","displayWeight":true,"animateHighlighted":false},"9":{"vertexA":3,"vertexB":6,"type":1,"weight":-17,"state":"default","displayWeight":true,"animateHighlighted":false},"10":{"vertexA":6,"vertexB":5,"type":1,"weight":-5,"state":"default","displayWeight":true,"animateHighlighted":false},"11":{"vertexA":5,"vertexB":7,"type":1,"weight":-10,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"x","lineNo":[1,2]}';
  else if ($id == 19)
    echo '{"vl":{"0":{"cx":50,"cy":100,"text":"0","state":"default"},"1":{"cx":250,"cy":100,"text":"1","state":"default"},"2":{"cx":250,"cy":300,"text":"2","state":"default"},"3":{"cx":450,"cy":100,"text":"3","state":"default"},"4":{"cx":450,"cy":300,"text":"4","state":"default"},"5":{"cx":650,"cy":100,"text":"5","state":"default"},"6":{"cx":650,"cy":300,"text":"6","state":"default"},"7":{"cx":850,"cy":100,"text":"7","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":1,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":0,"vertexB":2,"type":1,"weight":22,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":2,"vertexB":1,"type":1,"weight":3,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":2,"vertexB":4,"type":1,"weight":-6,"state":"default","displayWeight":true,"animateHighlighted":false},"4":{"vertexA":3,"vertexB":1,"type":1,"weight":77,"state":"default","displayWeight":true,"animateHighlighted":false},"5":{"vertexA":1,"vertexB":4,"type":1,"weight":11,"state":"default","displayWeight":true,"animateHighlighted":false},"6":{"vertexA":4,"vertexB":3,"type":1,"weight":2,"state":"default","displayWeight":true,"animateHighlighted":false},"7":{"vertexA":6,"vertexB":4,"type":1,"weight":21,"state":"default","displayWeight":true,"animateHighlighted":false},"8":{"vertexA":3,"vertexB":5,"type":1,"weight":17,"state":"default","displayWeight":true,"animateHighlighted":false},"9":{"vertexA":3,"vertexB":6,"type":1,"weight":-17,"state":"default","displayWeight":true,"animateHighlighted":false},"10":{"vertexA":6,"vertexB":5,"type":1,"weight":-5,"state":"default","displayWeight":true,"animateHighlighted":false},"11":{"vertexA":5,"vertexB":7,"type":1,"weight":18,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"x","lineNo":[1,2]}';
  else if ($id == 20)
    echo '{"vl":{"0":{"cx":50,"cy":100,"text":"0","state":"default"},"1":{"cx":250,"cy":100,"text":"1","state":"default"},"2":{"cx":250,"cy":300,"text":"2","state":"default"},"3":{"cx":450,"cy":100,"text":"3","state":"default"},"4":{"cx":450,"cy":300,"text":"4","state":"default"},"5":{"cx":650,"cy":100,"text":"5","state":"default"},"6":{"cx":650,"cy":300,"text":"6","state":"default"},"7":{"cx":850,"cy":100,"text":"7","state":"default"}},"el":{"0":{"vertexA":0,"vertexB":1,"type":1,"weight":12,"state":"default","displayWeight":true,"animateHighlighted":false},"1":{"vertexA":0,"vertexB":2,"type":1,"weight":22,"state":"default","displayWeight":true,"animateHighlighted":false},"2":{"vertexA":2,"vertexB":1,"type":1,"weight":3,"state":"default","displayWeight":true,"animateHighlighted":false},"3":{"vertexA":2,"vertexB":4,"type":1,"weight":-6,"state":"default","displayWeight":true,"animateHighlighted":false},"4":{"vertexA":3,"vertexB":1,"type":2,"weight":7,"state":"default","displayWeight":true,"animateHighlighted":false},"5":{"vertexA":1,"vertexB":4,"type":1,"weight":11,"state":"default","displayWeight":true,"animateHighlighted":false},"6":{"vertexA":4,"vertexB":3,"type":1,"weight":2,"state":"default","displayWeight":true,"animateHighlighted":false},"7":{"vertexA":6,"vertexB":4,"type":1,"weight":21,"state":"default","displayWeight":true,"animateHighlighted":false},"8":{"vertexA":3,"vertexB":5,"type":1,"weight":18,"state":"default","displayWeight":true,"animateHighlighted":false},"9":{"vertexA":3,"vertexB":6,"type":1,"weight":-17,"state":"default","displayWeight":true,"animateHighlighted":false},"10":{"vertexA":6,"vertexB":5,"type":1,"weight":-5,"state":"default","displayWeight":true,"animateHighlighted":false},"11":{"vertexA":5,"vertexB":7,"type":1,"weight":-10,"state":"default","displayWeight":true,"animateHighlighted":false}},"status":"x","lineNo":[1,2]}';
  else
    echo 'You need to supply an id<br>';
}
else if ($mode == 3) { // check answer
  $result = mysqli_query($con, "SELECT * FROM quiz2");
  while ($row = mysqli_fetch_array($result))
    if ($row['matric'] == $uid) {
      $starttime = $row['login'];
      break;
    }

  $ending = date_create();
  $endtime = date_timestamp_get($ending);
  $elapsed = $endtime - $starttime;

  if ($elapsed > 2430) { // grace period of 30s
    echo -1;
    return;
  }

  // $ansarr = array(15, 1, 6, 1, 4, 3, 1, 3, 2, 8, 6, 9, 1, 5, 2, 0, 0, 0, 1, 2);
  $ansarr = array(
    array(15,80,76,77),
    array(1,2),
    array(6,13,24,25),
    array(1,2,3,4,5),
    array(4,5,7),
    array(3,5,6,7),
    array(1,2,3),
    array(3),
    array(2,0,1,3,4),
    array(8,3,1,2,4),
    array(6,1,2,7,0),
    array(9,8,2,1,6),
    array(
      array(1,2),
      array(1,6),
      array(6,7),
      array(0,1),
      array(8,9)
      ),
    array(
      array(5,6)
      ),
    array(
      array(2,8)
      ),
    array(0),
    array(0,1,2,3,5),
    array(0,5,6,7),
    array(1,2,3,4,7),
    array(2,7)
    );
  $ans = $_GET["ans"];

  for ($i = 0; $i < count($ans); $i++) {
    $ans[$i] = explode(',',$ans[$i]);
    for ($j = 0; $j < count($ans[$i]); $j++){
      $ans[$i][$j] = (int)$ans[$i][$j];
      // echo($ans[$i][$j].' ');
    }
    // echo('<br>');
  }

  $edgeAns = array(12,13,14); // 0-based indexing of questions which answers are edges
  for ($i = 0; $i < count($edgeAns); $i++) {
    $index = $edgeAns[$i];
    $newArray = array();
    for ($j = 0; $j < count($ans[$index]); $j+=2){
      $temp = array($ans[$index][$j],$ans[$index][$j+1]);
      array_push($newArray, $temp);
    }
    $ans[$index] = $newArray;
  }

  $sortAns = array(1,3,5,6,7,16,17,18,19); // 0-based indexing of questions which answers are not order-sensitive
  for ($i = 0; $i < count($sortAns); $i++) {
    sort($ans[$sortAns[$i]]);
  }

  // 1 -> 15, 80, 76, 77
  // 2 -> 1, 2
  // 3 -> 6, 13, 24, 25
  // 4 -> 1, 2, 3, 4, 5
  // 5 -> 4, 5, 7
  // 6 -> 3, 5, 6, 7
  // 7 -> 1, 2, 3
  // 8 -> 3
  // 9 -> 2, 0, 1, 3, 4
  // 10 -> 8, 3, 1, 2, 4
  // 11 -> vertex 6, 1, 2, 7, and 0
  // 12 -> vertex 9, 8, 2, 1, and 6
  // 13 -> edge 1-2, 1-6, 6-7, 0-1, and 8-9
  // 14 -> edge 5-6 of weight 30
  // 15 -> edge 2-8 of weight 13
  // 16 -> 0
  // 17 -> 0, 1, 2, 3, 5
  // 18 -> 0, 5, 6, 7
  // 19 -> 1, 2, 3, 4, 7
  // 20 -> 2, 7

  $numcorrect = 0;
  for ($i = 0; $i < 20; $i++) {
//echo $ans[$i] . ' vs ' . $ansarr[$i] . '<br>';
    if ($ans[$i] === $ansarr[$i]){
      $numcorrect++;
    }
    // echo $ans[$i] . ' vs ' . $ansarr[$i] . $numcorrect . '<br>';
  }

  echo $numcorrect; // . '<br>';
//  echo $elapsed;
  mysqli_query($con, "UPDATE quiz2 SET score=" . $numcorrect . ",answer='" . serialize($ans) . "',testtime=" . $elapsed . " WHERE matric='" . $uid . "'");
}
else if ($mode == 4) { // special mode for TA to reset student's attempt
  $tapwd = $_GET["tapwd"];
  if ($tapwd == "iamcs2010ta") {
    echo 'The attempt record for ' . $uid . ' has been removed. This student can try again.';
    mysqli_query($con, "DELETE FROM quiz2 WHERE matric='" . $uid . "'");
  }
  else
    echo 'You are not authorized to reset the attempt count.<br>';
}
else if ($mode == 5) { // check if uid exists
  $result = mysqli_query($con, "SELECT * FROM quiz2");
  while ($row = mysqli_fetch_array($result))
    if ($row['matric'] == $uid) {
      echo 1;
      return;
    }

  echo 0;
}
else if ($mode == 6) { // return time elapsed since login (first time this uid/pwd calls this script)
  $result = mysqli_query($con, "SELECT * FROM quiz2");
  while ($row = mysqli_fetch_array($result))
    if ($row['matric'] == $uid) {
      $starttime = $row['login'];
      break;
    }

  $ending = date_create();
  $endtime = date_timestamp_get($ending);

  $elapsed = $endtime - $starttime;

  echo $elapsed;
}
else if ($mode == 7) { // get the name of this uid
  echo $mat_name[$uid];
}
else if ($mode == 8) { // to start timer and update attempt counter
  $date = date_create();
  mysqli_query($con, "INSERT INTO quiz2 (matric, name) VALUES ('" . $uid . "','" . $mat_name[$uid] . "')");
  mysqli_query($con, "UPDATE quiz2 SET login=" . date_timestamp_get($date) . " WHERE matric = '" . $uid . "'");
  echo 1;
}
else if ($mode == 9) {
  $result = mysqli_query($con, "SELECT * FROM quiz2");
  while ($row = mysqli_fetch_array($result))
    if ($row['matric'] == $uid) {
      $stuans = unserialize($row['answer']);
      for ($i = 0; $i < 19; $i++){
        for ($j = 0; $j < count($stuans[$i]); $j++){
          echo $stuans[$i][$j] . ',';
        }
        echo('<br>');
      }
      for ($i = 0; $i < 19; $i++)
        echo $stuans[$i] . ',';
      echo '<br>' . $row['answer'];
      break;
    }
}
else {
  echo 'Wrong usage'; // Usage: http://algorithmics.comp.nus.edu.sg/test.php?mode=(1|2|3)&id=(1|2)(&x=0&y=0)?<br>';
}

mysqli_close($con);
?>
